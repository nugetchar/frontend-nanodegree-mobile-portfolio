<!DOCTYPE html>

<html>
<head>
  <title>semver.browser.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="../../../../docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>semver.browser.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>;(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">exports</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>export the class if we are in a Node-like system.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">module</span> === <span class="hljs-string">'object'</span> &amp;&amp; <span class="hljs-built_in">module</span>.exports === exports)
  exports = <span class="hljs-built_in">module</span>.exports = SemVer;</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>The debug function is excluded entirely from the minified version.</p>

            </div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>Note: this is the semver.org version of the spec that it implements
Not necessarily the package version of this code.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>exports.SEMVER_SPEC_VERSION = <span class="hljs-string">'2.0.0'</span>;

<span class="hljs-keyword">var</span> MAX_LENGTH = <span class="hljs-number">256</span>;
<span class="hljs-keyword">var</span> MAX_SAFE_INTEGER = <span class="hljs-built_in">Number</span>.MAX_SAFE_INTEGER || <span class="hljs-number">9007199254740991</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>The actual regexps go on exports.re</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> re = exports.re = [];
<span class="hljs-keyword">var</span> src = exports.src = [];
<span class="hljs-keyword">var</span> R = <span class="hljs-number">0</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>The following Regular Expressions can be used for tokenizing,
validating, and parsing SemVer version strings.</p>

            </div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <h2 id="numeric-identifier">Numeric Identifier</h2>
<p>A single <code>0</code>, or a non-zero digit followed by zero or more digits.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="hljs-keyword">var</span> NUMERICIDENTIFIER = R++;
src[NUMERICIDENTIFIER] = <span class="hljs-string">'0|[1-9]\\d*'</span>;
<span class="hljs-keyword">var</span> NUMERICIDENTIFIERLOOSE = R++;
src[NUMERICIDENTIFIERLOOSE] = <span class="hljs-string">'[0-9]+'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <h2 id="non-numeric-identifier">Non-numeric Identifier</h2>
<p>Zero or more digits, followed by a letter or hyphen, and then zero or
more letters, digits, or hyphens.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="hljs-keyword">var</span> NONNUMERICIDENTIFIER = R++;
src[NONNUMERICIDENTIFIER] = <span class="hljs-string">'\\d*[a-zA-Z-][a-zA-Z0-9-]*'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <h2 id="main-version">Main Version</h2>
<p>Three dot-separated numeric identifiers.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="hljs-keyword">var</span> MAINVERSION = R++;
src[MAINVERSION] = <span class="hljs-string">'('</span> + src[NUMERICIDENTIFIER] + <span class="hljs-string">')\\.'</span> +
                   <span class="hljs-string">'('</span> + src[NUMERICIDENTIFIER] + <span class="hljs-string">')\\.'</span> +
                   <span class="hljs-string">'('</span> + src[NUMERICIDENTIFIER] + <span class="hljs-string">')'</span>;

<span class="hljs-keyword">var</span> MAINVERSIONLOOSE = R++;
src[MAINVERSIONLOOSE] = <span class="hljs-string">'('</span> + src[NUMERICIDENTIFIERLOOSE] + <span class="hljs-string">')\\.'</span> +
                        <span class="hljs-string">'('</span> + src[NUMERICIDENTIFIERLOOSE] + <span class="hljs-string">')\\.'</span> +
                        <span class="hljs-string">'('</span> + src[NUMERICIDENTIFIERLOOSE] + <span class="hljs-string">')'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <h2 id="pre-release-version-identifier">Pre-release Version Identifier</h2>
<p>A numeric identifier, or a non-numeric identifier.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="hljs-keyword">var</span> PRERELEASEIDENTIFIER = R++;
src[PRERELEASEIDENTIFIER] = <span class="hljs-string">'(?:'</span> + src[NUMERICIDENTIFIER] +
                            <span class="hljs-string">'|'</span> + src[NONNUMERICIDENTIFIER] + <span class="hljs-string">')'</span>;

<span class="hljs-keyword">var</span> PRERELEASEIDENTIFIERLOOSE = R++;
src[PRERELEASEIDENTIFIERLOOSE] = <span class="hljs-string">'(?:'</span> + src[NUMERICIDENTIFIERLOOSE] +
                                 <span class="hljs-string">'|'</span> + src[NONNUMERICIDENTIFIER] + <span class="hljs-string">')'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <h2 id="pre-release-version">Pre-release Version</h2>
<p>Hyphen, followed by one or more dot-separated pre-release version
identifiers.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="hljs-keyword">var</span> PRERELEASE = R++;
src[PRERELEASE] = <span class="hljs-string">'(?:-('</span> + src[PRERELEASEIDENTIFIER] +
                  <span class="hljs-string">'(?:\\.'</span> + src[PRERELEASEIDENTIFIER] + <span class="hljs-string">')*))'</span>;

<span class="hljs-keyword">var</span> PRERELEASELOOSE = R++;
src[PRERELEASELOOSE] = <span class="hljs-string">'(?:-?('</span> + src[PRERELEASEIDENTIFIERLOOSE] +
                       <span class="hljs-string">'(?:\\.'</span> + src[PRERELEASEIDENTIFIERLOOSE] + <span class="hljs-string">')*))'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <h2 id="build-metadata-identifier">Build Metadata Identifier</h2>
<p>Any combination of digits, letters, or hyphens.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="hljs-keyword">var</span> BUILDIDENTIFIER = R++;
src[BUILDIDENTIFIER] = <span class="hljs-string">'[0-9A-Za-z-]+'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <h2 id="build-metadata">Build Metadata</h2>
<p>Plus sign, followed by one or more period-separated build metadata
identifiers.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="hljs-keyword">var</span> BUILD = R++;
src[BUILD] = <span class="hljs-string">'(?:\\+('</span> + src[BUILDIDENTIFIER] +
             <span class="hljs-string">'(?:\\.'</span> + src[BUILDIDENTIFIER] + <span class="hljs-string">')*))'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <h2 id="full-version-string">Full Version String</h2>
<p>A main version, followed optionally by a pre-release version and
build metadata.</p>

            </div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>Note that the only major, minor, patch, and pre-release sections of
the version string are capturing groups.  The build metadata is not a
capturing group, because it should not ever be used in version
comparison.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="hljs-keyword">var</span> FULL = R++;
<span class="hljs-keyword">var</span> FULLPLAIN = <span class="hljs-string">'v?'</span> + src[MAINVERSION] +
                src[PRERELEASE] + <span class="hljs-string">'?'</span> +
                src[BUILD] + <span class="hljs-string">'?'</span>;

src[FULL] = <span class="hljs-string">'^'</span> + FULLPLAIN + <span class="hljs-string">'$'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>like full, but allows v1.2.3 and =1.2.3, which people do sometimes.
also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty
common in the npm registry.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> LOOSEPLAIN = <span class="hljs-string">'[v=\\s]*'</span> + src[MAINVERSIONLOOSE] +
                 src[PRERELEASELOOSE] + <span class="hljs-string">'?'</span> +
                 src[BUILD] + <span class="hljs-string">'?'</span>;

<span class="hljs-keyword">var</span> LOOSE = R++;
src[LOOSE] = <span class="hljs-string">'^'</span> + LOOSEPLAIN + <span class="hljs-string">'$'</span>;

<span class="hljs-keyword">var</span> GTLT = R++;
src[GTLT] = <span class="hljs-string">'((?:&lt;|&gt;)?=?)'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>Something like “2.*” or “1.2.x”.
Note that “x.x” is a valid xRange identifer, meaning “any version”
Only the first item is strictly required.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> XRANGEIDENTIFIERLOOSE = R++;
src[XRANGEIDENTIFIERLOOSE] = src[NUMERICIDENTIFIERLOOSE] + <span class="hljs-string">'|x|X|\\*'</span>;
<span class="hljs-keyword">var</span> XRANGEIDENTIFIER = R++;
src[XRANGEIDENTIFIER] = src[NUMERICIDENTIFIER] + <span class="hljs-string">'|x|X|\\*'</span>;

<span class="hljs-keyword">var</span> XRANGEPLAIN = R++;
src[XRANGEPLAIN] = <span class="hljs-string">'[v=\\s]*('</span> + src[XRANGEIDENTIFIER] + <span class="hljs-string">')'</span> +
                   <span class="hljs-string">'(?:\\.('</span> + src[XRANGEIDENTIFIER] + <span class="hljs-string">')'</span> +
                   <span class="hljs-string">'(?:\\.('</span> + src[XRANGEIDENTIFIER] + <span class="hljs-string">')'</span> +
                   <span class="hljs-string">'(?:'</span> + src[PRERELEASE] + <span class="hljs-string">')?'</span> +
                   src[BUILD] + <span class="hljs-string">'?'</span> +
                   <span class="hljs-string">')?)?'</span>;

<span class="hljs-keyword">var</span> XRANGEPLAINLOOSE = R++;
src[XRANGEPLAINLOOSE] = <span class="hljs-string">'[v=\\s]*('</span> + src[XRANGEIDENTIFIERLOOSE] + <span class="hljs-string">')'</span> +
                        <span class="hljs-string">'(?:\\.('</span> + src[XRANGEIDENTIFIERLOOSE] + <span class="hljs-string">')'</span> +
                        <span class="hljs-string">'(?:\\.('</span> + src[XRANGEIDENTIFIERLOOSE] + <span class="hljs-string">')'</span> +
                        <span class="hljs-string">'(?:'</span> + src[PRERELEASELOOSE] + <span class="hljs-string">')?'</span> +
                        src[BUILD] + <span class="hljs-string">'?'</span> +
                        <span class="hljs-string">')?)?'</span>;

<span class="hljs-keyword">var</span> XRANGE = R++;
src[XRANGE] = <span class="hljs-string">'^'</span> + src[GTLT] + <span class="hljs-string">'\\s*'</span> + src[XRANGEPLAIN] + <span class="hljs-string">'$'</span>;
<span class="hljs-keyword">var</span> XRANGELOOSE = R++;
src[XRANGELOOSE] = <span class="hljs-string">'^'</span> + src[GTLT] + <span class="hljs-string">'\\s*'</span> + src[XRANGEPLAINLOOSE] + <span class="hljs-string">'$'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>Tilde ranges.
Meaning is “reasonably at or greater than”</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> LONETILDE = R++;
src[LONETILDE] = <span class="hljs-string">'(?:~&gt;?)'</span>;

<span class="hljs-keyword">var</span> TILDETRIM = R++;
src[TILDETRIM] = <span class="hljs-string">'(\\s*)'</span> + src[LONETILDE] + <span class="hljs-string">'\\s+'</span>;
re[TILDETRIM] = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(src[TILDETRIM], <span class="hljs-string">'g'</span>);
<span class="hljs-keyword">var</span> tildeTrimReplace = <span class="hljs-string">'$1~'</span>;

<span class="hljs-keyword">var</span> TILDE = R++;
src[TILDE] = <span class="hljs-string">'^'</span> + src[LONETILDE] + src[XRANGEPLAIN] + <span class="hljs-string">'$'</span>;
<span class="hljs-keyword">var</span> TILDELOOSE = R++;
src[TILDELOOSE] = <span class="hljs-string">'^'</span> + src[LONETILDE] + src[XRANGEPLAINLOOSE] + <span class="hljs-string">'$'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>Caret ranges.
Meaning is “at least and backwards compatible with”</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> LONECARET = R++;
src[LONECARET] = <span class="hljs-string">'(?:\\^)'</span>;

<span class="hljs-keyword">var</span> CARETTRIM = R++;
src[CARETTRIM] = <span class="hljs-string">'(\\s*)'</span> + src[LONECARET] + <span class="hljs-string">'\\s+'</span>;
re[CARETTRIM] = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(src[CARETTRIM], <span class="hljs-string">'g'</span>);
<span class="hljs-keyword">var</span> caretTrimReplace = <span class="hljs-string">'$1^'</span>;

<span class="hljs-keyword">var</span> CARET = R++;
src[CARET] = <span class="hljs-string">'^'</span> + src[LONECARET] + src[XRANGEPLAIN] + <span class="hljs-string">'$'</span>;
<span class="hljs-keyword">var</span> CARETLOOSE = R++;
src[CARETLOOSE] = <span class="hljs-string">'^'</span> + src[LONECARET] + src[XRANGEPLAINLOOSE] + <span class="hljs-string">'$'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>A simple gt/lt/eq thing, or just “” to indicate “any version”</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> COMPARATORLOOSE = R++;
src[COMPARATORLOOSE] = <span class="hljs-string">'^'</span> + src[GTLT] + <span class="hljs-string">'\\s*('</span> + LOOSEPLAIN + <span class="hljs-string">')$|^$'</span>;
<span class="hljs-keyword">var</span> COMPARATOR = R++;
src[COMPARATOR] = <span class="hljs-string">'^'</span> + src[GTLT] + <span class="hljs-string">'\\s*('</span> + FULLPLAIN + <span class="hljs-string">')$|^$'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>An expression to strip any whitespace between the gtlt and the thing
it modifies, so that <code>&gt; 1.2.3</code> ==&gt; <code>&gt;1.2.3</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> COMPARATORTRIM = R++;
src[COMPARATORTRIM] = <span class="hljs-string">'(\\s*)'</span> + src[GTLT] +
                      <span class="hljs-string">'\\s*('</span> + LOOSEPLAIN + <span class="hljs-string">'|'</span> + src[XRANGEPLAIN] + <span class="hljs-string">')'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>this one has to use the /g flag</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>re[COMPARATORTRIM] = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(src[COMPARATORTRIM], <span class="hljs-string">'g'</span>);
<span class="hljs-keyword">var</span> comparatorTrimReplace = <span class="hljs-string">'$1$2$3'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>Something like <code>1.2.3 - 1.2.4</code>
Note that these all use the loose form, because they’ll be
checked against either the strict or loose comparator form
later.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> HYPHENRANGE = R++;
src[HYPHENRANGE] = <span class="hljs-string">'^\\s*('</span> + src[XRANGEPLAIN] + <span class="hljs-string">')'</span> +
                   <span class="hljs-string">'\\s+-\\s+'</span> +
                   <span class="hljs-string">'('</span> + src[XRANGEPLAIN] + <span class="hljs-string">')'</span> +
                   <span class="hljs-string">'\\s*$'</span>;

<span class="hljs-keyword">var</span> HYPHENRANGELOOSE = R++;
src[HYPHENRANGELOOSE] = <span class="hljs-string">'^\\s*('</span> + src[XRANGEPLAINLOOSE] + <span class="hljs-string">')'</span> +
                        <span class="hljs-string">'\\s+-\\s+'</span> +
                        <span class="hljs-string">'('</span> + src[XRANGEPLAINLOOSE] + <span class="hljs-string">')'</span> +
                        <span class="hljs-string">'\\s*$'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>Star ranges basically just allow anything at all.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> STAR = R++;
src[STAR] = <span class="hljs-string">'(&lt;|&gt;)?=?\\s*\\*'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>Compile to actual regexp objects.
All are flag-free, unless they were created above with a flag.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; R; i++) {
  ;
  <span class="hljs-keyword">if</span> (!re[i])
    re[i] = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(src[i]);
}

exports.parse = parse;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parse</span>(<span class="hljs-params">version, loose</span>) </span>{
  <span class="hljs-keyword">if</span> (version <span class="hljs-keyword">instanceof</span> SemVer)
    <span class="hljs-keyword">return</span> version;

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> version !== <span class="hljs-string">'string'</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">if</span> (version.length &gt; MAX_LENGTH)
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">var</span> r = loose ? re[LOOSE] : re[FULL];
  <span class="hljs-keyword">if</span> (!r.test(version))
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> SemVer(version, loose);
  } <span class="hljs-keyword">catch</span> (er) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  }
}

exports.valid = valid;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">valid</span>(<span class="hljs-params">version, loose</span>) </span>{
  <span class="hljs-keyword">var</span> v = parse(version, loose);
  <span class="hljs-keyword">return</span> v ? v.version : <span class="hljs-literal">null</span>;
}


exports.clean = clean;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">clean</span>(<span class="hljs-params">version, loose</span>) </span>{
  <span class="hljs-keyword">var</span> s = parse(version.trim().replace(<span class="hljs-regexp">/^[=v]+/</span>, <span class="hljs-string">''</span>), loose);
  <span class="hljs-keyword">return</span> s ? s.version : <span class="hljs-literal">null</span>;
}

exports.SemVer = SemVer;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">SemVer</span>(<span class="hljs-params">version, loose</span>) </span>{
  <span class="hljs-keyword">if</span> (version <span class="hljs-keyword">instanceof</span> SemVer) {
    <span class="hljs-keyword">if</span> (version.loose === loose)
      <span class="hljs-keyword">return</span> version;
    <span class="hljs-keyword">else</span>
      version = version.version;
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> version !== <span class="hljs-string">'string'</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'Invalid Version: '</span> + version);
  }

  <span class="hljs-keyword">if</span> (version.length &gt; MAX_LENGTH)
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'version is longer than '</span> + MAX_LENGTH + <span class="hljs-string">' characters'</span>)

  <span class="hljs-keyword">if</span> (!(<span class="hljs-keyword">this</span> <span class="hljs-keyword">instanceof</span> SemVer))
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> SemVer(version, loose);

  ;
  <span class="hljs-keyword">this</span>.loose = loose;
  <span class="hljs-keyword">var</span> m = version.trim().match(loose ? re[LOOSE] : re[FULL]);

  <span class="hljs-keyword">if</span> (!m)
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'Invalid Version: '</span> + version);

  <span class="hljs-keyword">this</span>.raw = version;</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>these are actually numbers</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">this</span>.major = +m[<span class="hljs-number">1</span>];
  <span class="hljs-keyword">this</span>.minor = +m[<span class="hljs-number">2</span>];
  <span class="hljs-keyword">this</span>.patch = +m[<span class="hljs-number">3</span>];

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.major &gt; MAX_SAFE_INTEGER || <span class="hljs-keyword">this</span>.major &lt; <span class="hljs-number">0</span>)
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'Invalid major version'</span>)

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.minor &gt; MAX_SAFE_INTEGER || <span class="hljs-keyword">this</span>.minor &lt; <span class="hljs-number">0</span>)
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'Invalid minor version'</span>)

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.patch &gt; MAX_SAFE_INTEGER || <span class="hljs-keyword">this</span>.patch &lt; <span class="hljs-number">0</span>)
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'Invalid patch version'</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>numberify any prerelease numeric ids</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">if</span> (!m[<span class="hljs-number">4</span>])
    <span class="hljs-keyword">this</span>.prerelease = [];
  <span class="hljs-keyword">else</span>
    <span class="hljs-keyword">this</span>.prerelease = m[<span class="hljs-number">4</span>].split(<span class="hljs-string">'.'</span>).map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">id</span>) </span>{
      <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/^[0-9]+$/</span>.test(id)) {
        <span class="hljs-keyword">var</span> num = +id
        <span class="hljs-keyword">if</span> (num &gt;= <span class="hljs-number">0</span> &amp;&amp; num &lt; MAX_SAFE_INTEGER)
          <span class="hljs-keyword">return</span> num
      }
      <span class="hljs-keyword">return</span> id;
    });

  <span class="hljs-keyword">this</span>.build = m[<span class="hljs-number">5</span>] ? m[<span class="hljs-number">5</span>].split(<span class="hljs-string">'.'</span>) : [];
  <span class="hljs-keyword">this</span>.format();
}

SemVer.prototype.format = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">this</span>.version = <span class="hljs-keyword">this</span>.major + <span class="hljs-string">'.'</span> + <span class="hljs-keyword">this</span>.minor + <span class="hljs-string">'.'</span> + <span class="hljs-keyword">this</span>.patch;
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.prerelease.length)
    <span class="hljs-keyword">this</span>.version += <span class="hljs-string">'-'</span> + <span class="hljs-keyword">this</span>.prerelease.join(<span class="hljs-string">'.'</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.version;
};

SemVer.prototype.inspect = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-string">'&lt;SemVer "'</span> + <span class="hljs-keyword">this</span> + <span class="hljs-string">'"&gt;'</span>;
};

SemVer.prototype.toString = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.version;
};

SemVer.prototype.compare = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">other</span>) </span>{
  ;
  <span class="hljs-keyword">if</span> (!(other <span class="hljs-keyword">instanceof</span> SemVer))
    other = <span class="hljs-keyword">new</span> SemVer(other, <span class="hljs-keyword">this</span>.loose);

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.compareMain(other) || <span class="hljs-keyword">this</span>.comparePre(other);
};

SemVer.prototype.compareMain = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">other</span>) </span>{
  <span class="hljs-keyword">if</span> (!(other <span class="hljs-keyword">instanceof</span> SemVer))
    other = <span class="hljs-keyword">new</span> SemVer(other, <span class="hljs-keyword">this</span>.loose);

  <span class="hljs-keyword">return</span> compareIdentifiers(<span class="hljs-keyword">this</span>.major, other.major) ||
         compareIdentifiers(<span class="hljs-keyword">this</span>.minor, other.minor) ||
         compareIdentifiers(<span class="hljs-keyword">this</span>.patch, other.patch);
};

SemVer.prototype.comparePre = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">other</span>) </span>{
  <span class="hljs-keyword">if</span> (!(other <span class="hljs-keyword">instanceof</span> SemVer))
    other = <span class="hljs-keyword">new</span> SemVer(other, <span class="hljs-keyword">this</span>.loose);</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>NOT having a prerelease is &gt; having one</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.prerelease.length &amp;&amp; !other.prerelease.length)
    <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.prerelease.length &amp;&amp; other.prerelease.length)
    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.prerelease.length &amp;&amp; !other.prerelease.length)
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;

  <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">do</span> {
    <span class="hljs-keyword">var</span> a = <span class="hljs-keyword">this</span>.prerelease[i];
    <span class="hljs-keyword">var</span> b = other.prerelease[i];
    ;
    <span class="hljs-keyword">if</span> (a === <span class="hljs-literal">undefined</span> &amp;&amp; b === <span class="hljs-literal">undefined</span>)
      <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (b === <span class="hljs-literal">undefined</span>)
      <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (a === <span class="hljs-literal">undefined</span>)
      <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (a === b)
      <span class="hljs-keyword">continue</span>;
    <span class="hljs-keyword">else</span>
      <span class="hljs-keyword">return</span> compareIdentifiers(a, b);
  } <span class="hljs-keyword">while</span> (++i);
};</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>preminor will bump the version up to the next minor release, and immediately
down to pre-release. premajor and prepatch work the same way.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>SemVer.prototype.inc = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">release, identifier</span>) </span>{
  <span class="hljs-keyword">switch</span> (release) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">'premajor'</span>:
      <span class="hljs-keyword">this</span>.prerelease.length = <span class="hljs-number">0</span>;
      <span class="hljs-keyword">this</span>.patch = <span class="hljs-number">0</span>;
      <span class="hljs-keyword">this</span>.minor = <span class="hljs-number">0</span>;
      <span class="hljs-keyword">this</span>.major++;
      <span class="hljs-keyword">this</span>.inc(<span class="hljs-string">'pre'</span>, identifier);
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'preminor'</span>:
      <span class="hljs-keyword">this</span>.prerelease.length = <span class="hljs-number">0</span>;
      <span class="hljs-keyword">this</span>.patch = <span class="hljs-number">0</span>;
      <span class="hljs-keyword">this</span>.minor++;
      <span class="hljs-keyword">this</span>.inc(<span class="hljs-string">'pre'</span>, identifier);
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'prepatch'</span>:</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>If this is already a prerelease, it will bump to the next version
drop any prereleases that might already exist, since they are not
relevant at this point.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">this</span>.prerelease.length = <span class="hljs-number">0</span>;
      <span class="hljs-keyword">this</span>.inc(<span class="hljs-string">'patch'</span>, identifier);
      <span class="hljs-keyword">this</span>.inc(<span class="hljs-string">'pre'</span>, identifier);
      <span class="hljs-keyword">break</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>If the input is a non-prerelease version, this acts the same as
prepatch.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">case</span> <span class="hljs-string">'prerelease'</span>:
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.prerelease.length === <span class="hljs-number">0</span>)
        <span class="hljs-keyword">this</span>.inc(<span class="hljs-string">'patch'</span>, identifier);
      <span class="hljs-keyword">this</span>.inc(<span class="hljs-string">'pre'</span>, identifier);
      <span class="hljs-keyword">break</span>;

    <span class="hljs-keyword">case</span> <span class="hljs-string">'major'</span>:</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>If this is a pre-major version, bump up to the same major version.
Otherwise increment major.
1.0.0-5 bumps to 1.0.0
1.1.0 bumps to 2.0.0</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.minor !== <span class="hljs-number">0</span> || <span class="hljs-keyword">this</span>.patch !== <span class="hljs-number">0</span> || <span class="hljs-keyword">this</span>.prerelease.length === <span class="hljs-number">0</span>)
        <span class="hljs-keyword">this</span>.major++;
      <span class="hljs-keyword">this</span>.minor = <span class="hljs-number">0</span>;
      <span class="hljs-keyword">this</span>.patch = <span class="hljs-number">0</span>;
      <span class="hljs-keyword">this</span>.prerelease = [];
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'minor'</span>:</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>If this is a pre-minor version, bump up to the same minor version.
Otherwise increment minor.
1.2.0-5 bumps to 1.2.0
1.2.1 bumps to 1.3.0</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.patch !== <span class="hljs-number">0</span> || <span class="hljs-keyword">this</span>.prerelease.length === <span class="hljs-number">0</span>)
        <span class="hljs-keyword">this</span>.minor++;
      <span class="hljs-keyword">this</span>.patch = <span class="hljs-number">0</span>;
      <span class="hljs-keyword">this</span>.prerelease = [];
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'patch'</span>:</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>If this is not a pre-release version, it will increment the patch.
If it is a pre-release it will bump up to the same patch version.
1.2.0-5 patches to 1.2.0
1.2.0 patches to 1.2.1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.prerelease.length === <span class="hljs-number">0</span>)
        <span class="hljs-keyword">this</span>.patch++;
      <span class="hljs-keyword">this</span>.prerelease = [];
      <span class="hljs-keyword">break</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>This probably shouldn’t be used publicly.
1.0.0 “pre” would become 1.0.0-0 which is the wrong direction.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">case</span> <span class="hljs-string">'pre'</span>:
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.prerelease.length === <span class="hljs-number">0</span>)
        <span class="hljs-keyword">this</span>.prerelease = [<span class="hljs-number">0</span>];
      <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">var</span> i = <span class="hljs-keyword">this</span>.prerelease.length;
        <span class="hljs-keyword">while</span> (--i &gt;= <span class="hljs-number">0</span>) {
          <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>.prerelease[i] === <span class="hljs-string">'number'</span>) {
            <span class="hljs-keyword">this</span>.prerelease[i]++;
            i = -<span class="hljs-number">2</span>;
          }
        }
        <span class="hljs-keyword">if</span> (i === -<span class="hljs-number">1</span>) <span class="hljs-comment">// didn't increment anything</span>
          <span class="hljs-keyword">this</span>.prerelease.push(<span class="hljs-number">0</span>);
      }
      <span class="hljs-keyword">if</span> (identifier) {</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>1.2.0-beta.1 bumps to 1.2.0-beta.2,
1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.prerelease[<span class="hljs-number">0</span>] === identifier) {
          <span class="hljs-keyword">if</span> (<span class="hljs-built_in">isNaN</span>(<span class="hljs-keyword">this</span>.prerelease[<span class="hljs-number">1</span>]))
            <span class="hljs-keyword">this</span>.prerelease = [identifier, <span class="hljs-number">0</span>];
        } <span class="hljs-keyword">else</span>
          <span class="hljs-keyword">this</span>.prerelease = [identifier, <span class="hljs-number">0</span>];
      }
      <span class="hljs-keyword">break</span>;

    <span class="hljs-keyword">default</span>:
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'invalid increment argument: '</span> + release);
  }
  <span class="hljs-keyword">this</span>.format();
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
};

exports.inc = inc;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">inc</span>(<span class="hljs-params">version, release, loose, identifier</span>) </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span>(loose) === <span class="hljs-string">'string'</span>) {
    identifier = loose;
    loose = <span class="hljs-literal">undefined</span>;
  }

  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> SemVer(version, loose).inc(release, identifier).version;
  } <span class="hljs-keyword">catch</span> (er) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  }
}

exports.diff = diff;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">diff</span>(<span class="hljs-params">version1, version2</span>) </span>{
  <span class="hljs-keyword">if</span> (eq(version1, version2)) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">var</span> v1 = parse(version1);
    <span class="hljs-keyword">var</span> v2 = parse(version2);
    <span class="hljs-keyword">if</span> (v1.prerelease.length || v2.prerelease.length) {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> v1) {
        <span class="hljs-keyword">if</span> (key === <span class="hljs-string">'major'</span> || key === <span class="hljs-string">'minor'</span> || key === <span class="hljs-string">'patch'</span>) {
          <span class="hljs-keyword">if</span> (v1[key] !== v2[key]) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">'pre'</span>+key;
          }
        }
      }
      <span class="hljs-keyword">return</span> <span class="hljs-string">'prerelease'</span>;
    }
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> v1) {
      <span class="hljs-keyword">if</span> (key === <span class="hljs-string">'major'</span> || key === <span class="hljs-string">'minor'</span> || key === <span class="hljs-string">'patch'</span>) {
        <span class="hljs-keyword">if</span> (v1[key] !== v2[key]) {
          <span class="hljs-keyword">return</span> key;
        }
      }
    }
  }
}

exports.compareIdentifiers = compareIdentifiers;

<span class="hljs-keyword">var</span> numeric = <span class="hljs-regexp">/^[0-9]+$/</span>;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compareIdentifiers</span>(<span class="hljs-params">a, b</span>) </span>{
  <span class="hljs-keyword">var</span> anum = numeric.test(a);
  <span class="hljs-keyword">var</span> bnum = numeric.test(b);

  <span class="hljs-keyword">if</span> (anum &amp;&amp; bnum) {
    a = +a;
    b = +b;
  }

  <span class="hljs-keyword">return</span> (anum &amp;&amp; !bnum) ? -<span class="hljs-number">1</span> :
         (bnum &amp;&amp; !anum) ? <span class="hljs-number">1</span> :
         a &lt; b ? -<span class="hljs-number">1</span> :
         a &gt; b ? <span class="hljs-number">1</span> :
         <span class="hljs-number">0</span>;
}

exports.rcompareIdentifiers = rcompareIdentifiers;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">rcompareIdentifiers</span>(<span class="hljs-params">a, b</span>) </span>{
  <span class="hljs-keyword">return</span> compareIdentifiers(b, a);
}

exports.major = major;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">major</span>(<span class="hljs-params">a, loose</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> SemVer(a, loose).major;
}

exports.minor = minor;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">minor</span>(<span class="hljs-params">a, loose</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> SemVer(a, loose).minor;
}

exports.patch = patch;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">patch</span>(<span class="hljs-params">a, loose</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> SemVer(a, loose).patch;
}

exports.compare = compare;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compare</span>(<span class="hljs-params">a, b, loose</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> SemVer(a, loose).compare(b);
}

exports.compareLoose = compareLoose;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compareLoose</span>(<span class="hljs-params">a, b</span>) </span>{
  <span class="hljs-keyword">return</span> compare(a, b, <span class="hljs-literal">true</span>);
}

exports.rcompare = rcompare;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">rcompare</span>(<span class="hljs-params">a, b, loose</span>) </span>{
  <span class="hljs-keyword">return</span> compare(b, a, loose);
}

exports.sort = sort;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sort</span>(<span class="hljs-params">list, loose</span>) </span>{
  <span class="hljs-keyword">return</span> list.sort(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">a, b</span>) </span>{
    <span class="hljs-keyword">return</span> exports.compare(a, b, loose);
  });
}

exports.rsort = rsort;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">rsort</span>(<span class="hljs-params">list, loose</span>) </span>{
  <span class="hljs-keyword">return</span> list.sort(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">a, b</span>) </span>{
    <span class="hljs-keyword">return</span> exports.rcompare(a, b, loose);
  });
}

exports.gt = gt;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">gt</span>(<span class="hljs-params">a, b, loose</span>) </span>{
  <span class="hljs-keyword">return</span> compare(a, b, loose) &gt; <span class="hljs-number">0</span>;
}

exports.lt = lt;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">lt</span>(<span class="hljs-params">a, b, loose</span>) </span>{
  <span class="hljs-keyword">return</span> compare(a, b, loose) &lt; <span class="hljs-number">0</span>;
}

exports.eq = eq;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">eq</span>(<span class="hljs-params">a, b, loose</span>) </span>{
  <span class="hljs-keyword">return</span> compare(a, b, loose) === <span class="hljs-number">0</span>;
}

exports.neq = neq;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">neq</span>(<span class="hljs-params">a, b, loose</span>) </span>{
  <span class="hljs-keyword">return</span> compare(a, b, loose) !== <span class="hljs-number">0</span>;
}

exports.gte = gte;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">gte</span>(<span class="hljs-params">a, b, loose</span>) </span>{
  <span class="hljs-keyword">return</span> compare(a, b, loose) &gt;= <span class="hljs-number">0</span>;
}

exports.lte = lte;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">lte</span>(<span class="hljs-params">a, b, loose</span>) </span>{
  <span class="hljs-keyword">return</span> compare(a, b, loose) &lt;= <span class="hljs-number">0</span>;
}

exports.cmp = cmp;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cmp</span>(<span class="hljs-params">a, op, b, loose</span>) </span>{
  <span class="hljs-keyword">var</span> ret;
  <span class="hljs-keyword">switch</span> (op) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">'==='</span>:
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> a === <span class="hljs-string">'object'</span>) a = a.version;
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> b === <span class="hljs-string">'object'</span>) b = b.version;
      ret = a === b;
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'!=='</span>:
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> a === <span class="hljs-string">'object'</span>) a = a.version;
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> b === <span class="hljs-string">'object'</span>) b = b.version;
      ret = a !== b;
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">''</span>: <span class="hljs-keyword">case</span> <span class="hljs-string">'='</span>: <span class="hljs-keyword">case</span> <span class="hljs-string">'=='</span>: ret = eq(a, b, loose); <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'!='</span>: ret = neq(a, b, loose); <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'&gt;'</span>: ret = gt(a, b, loose); <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'&gt;='</span>: ret = gte(a, b, loose); <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'&lt;'</span>: ret = lt(a, b, loose); <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'&lt;='</span>: ret = lte(a, b, loose); <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">default</span>: <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'Invalid operator: '</span> + op);
  }
  <span class="hljs-keyword">return</span> ret;
}

exports.Comparator = Comparator;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Comparator</span>(<span class="hljs-params">comp, loose</span>) </span>{
  <span class="hljs-keyword">if</span> (comp <span class="hljs-keyword">instanceof</span> Comparator) {
    <span class="hljs-keyword">if</span> (comp.loose === loose)
      <span class="hljs-keyword">return</span> comp;
    <span class="hljs-keyword">else</span>
      comp = comp.value;
  }

  <span class="hljs-keyword">if</span> (!(<span class="hljs-keyword">this</span> <span class="hljs-keyword">instanceof</span> Comparator))
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Comparator(comp, loose);

  ;
  <span class="hljs-keyword">this</span>.loose = loose;
  <span class="hljs-keyword">this</span>.parse(comp);

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.semver === ANY)
    <span class="hljs-keyword">this</span>.value = <span class="hljs-string">''</span>;
  <span class="hljs-keyword">else</span>
    <span class="hljs-keyword">this</span>.value = <span class="hljs-keyword">this</span>.operator + <span class="hljs-keyword">this</span>.semver.version;

  ;
}

<span class="hljs-keyword">var</span> ANY = {};
Comparator.prototype.parse = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">comp</span>) </span>{
  <span class="hljs-keyword">var</span> r = <span class="hljs-keyword">this</span>.loose ? re[COMPARATORLOOSE] : re[COMPARATOR];
  <span class="hljs-keyword">var</span> m = comp.match(r);

  <span class="hljs-keyword">if</span> (!m)
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'Invalid comparator: '</span> + comp);

  <span class="hljs-keyword">this</span>.operator = m[<span class="hljs-number">1</span>];
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.operator === <span class="hljs-string">'='</span>)
    <span class="hljs-keyword">this</span>.operator = <span class="hljs-string">''</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <p>if it literally is just ‘&gt;’ or ‘’ then allow anything.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">if</span> (!m[<span class="hljs-number">2</span>])
    <span class="hljs-keyword">this</span>.semver = ANY;
  <span class="hljs-keyword">else</span>
    <span class="hljs-keyword">this</span>.semver = <span class="hljs-keyword">new</span> SemVer(m[<span class="hljs-number">2</span>], <span class="hljs-keyword">this</span>.loose);
};

Comparator.prototype.inspect = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-string">'&lt;SemVer Comparator "'</span> + <span class="hljs-keyword">this</span> + <span class="hljs-string">'"&gt;'</span>;
};

Comparator.prototype.toString = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.value;
};

Comparator.prototype.test = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">version</span>) </span>{
  ;

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.semver === ANY)
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> version === <span class="hljs-string">'string'</span>)
    version = <span class="hljs-keyword">new</span> SemVer(version, <span class="hljs-keyword">this</span>.loose);

  <span class="hljs-keyword">return</span> cmp(version, <span class="hljs-keyword">this</span>.operator, <span class="hljs-keyword">this</span>.semver, <span class="hljs-keyword">this</span>.loose);
};


exports.Range = Range;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Range</span>(<span class="hljs-params">range, loose</span>) </span>{
  <span class="hljs-keyword">if</span> ((range <span class="hljs-keyword">instanceof</span> Range) &amp;&amp; range.loose === loose)
    <span class="hljs-keyword">return</span> range;

  <span class="hljs-keyword">if</span> (!(<span class="hljs-keyword">this</span> <span class="hljs-keyword">instanceof</span> Range))
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Range(range, loose);

  <span class="hljs-keyword">this</span>.loose = loose;</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p>First, split based on boolean or ||</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">this</span>.raw = range;
  <span class="hljs-keyword">this</span>.set = range.split(<span class="hljs-regexp">/\s*\|\|\s*/</span>).map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">range</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.parseRange(range.trim());
  }, <span class="hljs-keyword">this</span>).filter(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">c</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <p>throw out any that are not relevant for whatever reason</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">return</span> c.length;
  });

  <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.set.length) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'Invalid SemVer Range: '</span> + range);
  }

  <span class="hljs-keyword">this</span>.format();
}

Range.prototype.inspect = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-string">'&lt;SemVer Range "'</span> + <span class="hljs-keyword">this</span>.range + <span class="hljs-string">'"&gt;'</span>;
};

Range.prototype.format = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">this</span>.range = <span class="hljs-keyword">this</span>.set.map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">comps</span>) </span>{
    <span class="hljs-keyword">return</span> comps.join(<span class="hljs-string">' '</span>).trim();
  }).join(<span class="hljs-string">'||'</span>).trim();
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.range;
};

Range.prototype.toString = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.range;
};

Range.prototype.parseRange = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">range</span>) </span>{
  <span class="hljs-keyword">var</span> loose = <span class="hljs-keyword">this</span>.loose;
  range = range.trim();
  ;</pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <p><code>1.2.3 - 1.2.4</code> =&gt; <code>&gt;=1.2.3 &lt;=1.2.4</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> hr = loose ? re[HYPHENRANGELOOSE] : re[HYPHENRANGE];
  range = range.replace(hr, hyphenReplace);
  ;</pre></div></div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <p><code>&gt; 1.2.3 &lt; 1.2.5</code> =&gt; <code>&gt;1.2.3 &lt;1.2.5</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  range = range.replace(re[COMPARATORTRIM], comparatorTrimReplace);
  ;</pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <p><code>~ 1.2.3</code> =&gt; <code>~1.2.3</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  range = range.replace(re[TILDETRIM], tildeTrimReplace);</pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <p><code>^ 1.2.3</code> =&gt; <code>^1.2.3</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  range = range.replace(re[CARETTRIM], caretTrimReplace);</pre></div></div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <p>normalize spaces</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  range = range.split(<span class="hljs-regexp">/\s+/</span>).join(<span class="hljs-string">' '</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-45">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              <p>At this point, the range is completely trimmed and
ready to be split into comparators.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  <span class="hljs-keyword">var</span> compRe = loose ? re[COMPARATORLOOSE] : re[COMPARATOR];
  <span class="hljs-keyword">var</span> set = range.split(<span class="hljs-string">' '</span>).map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">comp</span>) </span>{
    <span class="hljs-keyword">return</span> parseComparator(comp, loose);
  }).join(<span class="hljs-string">' '</span>).split(<span class="hljs-regexp">/\s+/</span>);
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.loose) {</pre></div></div>
            
        </li>
        
        
        <li id="section-46">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-46">&#182;</a>
              </div>
              <p>in loose mode, throw out any that are not valid comparators</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    set = set.filter(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">comp</span>) </span>{
      <span class="hljs-keyword">return</span> !!comp.match(compRe);
    });
  }
  set = set.map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">comp</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Comparator(comp, loose);
  });

  <span class="hljs-keyword">return</span> set;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-47">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-47">&#182;</a>
              </div>
              <p>Mostly just for testing and legacy API reasons</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>exports.toComparators = toComparators;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toComparators</span>(<span class="hljs-params">range, loose</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Range(range, loose).set.map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">comp</span>) </span>{
    <span class="hljs-keyword">return</span> comp.map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">c</span>) </span>{
      <span class="hljs-keyword">return</span> c.value;
    }).join(<span class="hljs-string">' '</span>).trim().split(<span class="hljs-string">' '</span>);
  });
}</pre></div></div>
            
        </li>
        
        
        <li id="section-48">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-48">&#182;</a>
              </div>
              <p>comprised of xranges, tildes, stars, and gtlt’s at this point.
already replaced the hyphen ranges
turn into a set of JUST comparators.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseComparator</span>(<span class="hljs-params">comp, loose</span>) </span>{
  ;
  comp = replaceCarets(comp, loose);
  ;
  comp = replaceTildes(comp, loose);
  ;
  comp = replaceXRanges(comp, loose);
  ;
  comp = replaceStars(comp, loose);
  ;
  <span class="hljs-keyword">return</span> comp;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isX</span>(<span class="hljs-params">id</span>) </span>{
  <span class="hljs-keyword">return</span> !id || id.toLowerCase() === <span class="hljs-string">'x'</span> || id === <span class="hljs-string">'*'</span>;
}</pre></div></div>
            
        </li>
        
        
        <li id="section-49">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-49">&#182;</a>
              </div>
              <p>~, ~&gt; –&gt; * (any, kinda silly)
~2, ~2.x, ~2.x.x, ~&gt;2, ~&gt;2.x ~&gt;2.x.x –&gt; &gt;=2.0.0 <3.0.0
~2.0, ~2.0.x, ~>2.0, ~&gt;2.0.x –&gt; &gt;=2.0.0 <2.1.0
~1.2, ~1.2.x, ~>1.2, ~&gt;1.2.x –&gt; &gt;=1.2.0 <1.3.0
~1.2.3, ~>1.2.3 –&gt; &gt;=1.2.3 <1.3.0
~1.2.0, ~>1.2.0 –&gt; &gt;=1.2.0 &lt;1.3.0</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">replaceTildes</span>(<span class="hljs-params">comp, loose</span>) </span>{
  <span class="hljs-keyword">return</span> comp.trim().split(<span class="hljs-regexp">/\s+/</span>).map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">comp</span>) </span>{
    <span class="hljs-keyword">return</span> replaceTilde(comp, loose);
  }).join(<span class="hljs-string">' '</span>);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">replaceTilde</span>(<span class="hljs-params">comp, loose</span>) </span>{
  <span class="hljs-keyword">var</span> r = loose ? re[TILDELOOSE] : re[TILDE];
  <span class="hljs-keyword">return</span> comp.replace(r, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">_, M, m, p, pr</span>) </span>{
    ;
    <span class="hljs-keyword">var</span> ret;

    <span class="hljs-keyword">if</span> (isX(M))
      ret = <span class="hljs-string">''</span>;
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isX(m))
      ret = <span class="hljs-string">'&gt;='</span> + M + <span class="hljs-string">'.0.0 &lt;'</span> + (+M + <span class="hljs-number">1</span>) + <span class="hljs-string">'.0.0'</span>;
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isX(p))</pre></div></div>
            
        </li>
        
        
        <li id="section-50">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-50">&#182;</a>
              </div>
              <p>~1.2 == &gt;=1.2.0- &lt;1.3.0-</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      ret = <span class="hljs-string">'&gt;='</span> + M + <span class="hljs-string">'.'</span> + m + <span class="hljs-string">'.0 &lt;'</span> + M + <span class="hljs-string">'.'</span> + (+m + <span class="hljs-number">1</span>) + <span class="hljs-string">'.0'</span>;
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (pr) {
      ;
      <span class="hljs-keyword">if</span> (pr.charAt(<span class="hljs-number">0</span>) !== <span class="hljs-string">'-'</span>)
        pr = <span class="hljs-string">'-'</span> + pr;
      ret = <span class="hljs-string">'&gt;='</span> + M + <span class="hljs-string">'.'</span> + m + <span class="hljs-string">'.'</span> + p + pr +
            <span class="hljs-string">' &lt;'</span> + M + <span class="hljs-string">'.'</span> + (+m + <span class="hljs-number">1</span>) + <span class="hljs-string">'.0'</span>;
    } <span class="hljs-keyword">else</span></pre></div></div>
            
        </li>
        
        
        <li id="section-51">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-51">&#182;</a>
              </div>
              <p>~1.2.3 == &gt;=1.2.3 &lt;1.3.0</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      ret = <span class="hljs-string">'&gt;='</span> + M + <span class="hljs-string">'.'</span> + m + <span class="hljs-string">'.'</span> + p +
            <span class="hljs-string">' &lt;'</span> + M + <span class="hljs-string">'.'</span> + (+m + <span class="hljs-number">1</span>) + <span class="hljs-string">'.0'</span>;

    ;
    <span class="hljs-keyword">return</span> ret;
  });
}</pre></div></div>
            
        </li>
        
        
        <li id="section-52">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-52">&#182;</a>
              </div>
              <p>^ –&gt; * (any, kinda silly)
^2, ^2.x, ^2.x.x –&gt; &gt;=2.0.0 <3.0.0
^2.0, ^2.0.x --> &gt;=2.0.0 <3.0.0
^1.2, ^1.2.x --> &gt;=1.2.0 <2.0.0
^1.2.3 --> &gt;=1.2.3 <2.0.0
^1.2.0 --> &gt;=1.2.0 &lt;2.0.0</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">replaceCarets</span>(<span class="hljs-params">comp, loose</span>) </span>{
  <span class="hljs-keyword">return</span> comp.trim().split(<span class="hljs-regexp">/\s+/</span>).map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">comp</span>) </span>{
    <span class="hljs-keyword">return</span> replaceCaret(comp, loose);
  }).join(<span class="hljs-string">' '</span>);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">replaceCaret</span>(<span class="hljs-params">comp, loose</span>) </span>{
  ;
  <span class="hljs-keyword">var</span> r = loose ? re[CARETLOOSE] : re[CARET];
  <span class="hljs-keyword">return</span> comp.replace(r, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">_, M, m, p, pr</span>) </span>{
    ;
    <span class="hljs-keyword">var</span> ret;

    <span class="hljs-keyword">if</span> (isX(M))
      ret = <span class="hljs-string">''</span>;
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isX(m))
      ret = <span class="hljs-string">'&gt;='</span> + M + <span class="hljs-string">'.0.0 &lt;'</span> + (+M + <span class="hljs-number">1</span>) + <span class="hljs-string">'.0.0'</span>;
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isX(p)) {
      <span class="hljs-keyword">if</span> (M === <span class="hljs-string">'0'</span>)
        ret = <span class="hljs-string">'&gt;='</span> + M + <span class="hljs-string">'.'</span> + m + <span class="hljs-string">'.0 &lt;'</span> + M + <span class="hljs-string">'.'</span> + (+m + <span class="hljs-number">1</span>) + <span class="hljs-string">'.0'</span>;
      <span class="hljs-keyword">else</span>
        ret = <span class="hljs-string">'&gt;='</span> + M + <span class="hljs-string">'.'</span> + m + <span class="hljs-string">'.0 &lt;'</span> + (+M + <span class="hljs-number">1</span>) + <span class="hljs-string">'.0.0'</span>;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (pr) {
      ;
      <span class="hljs-keyword">if</span> (pr.charAt(<span class="hljs-number">0</span>) !== <span class="hljs-string">'-'</span>)
        pr = <span class="hljs-string">'-'</span> + pr;
      <span class="hljs-keyword">if</span> (M === <span class="hljs-string">'0'</span>) {
        <span class="hljs-keyword">if</span> (m === <span class="hljs-string">'0'</span>)
          ret = <span class="hljs-string">'&gt;='</span> + M + <span class="hljs-string">'.'</span> + m + <span class="hljs-string">'.'</span> + p + pr +
                <span class="hljs-string">' &lt;'</span> + M + <span class="hljs-string">'.'</span> + m + <span class="hljs-string">'.'</span> + (+p + <span class="hljs-number">1</span>);
        <span class="hljs-keyword">else</span>
          ret = <span class="hljs-string">'&gt;='</span> + M + <span class="hljs-string">'.'</span> + m + <span class="hljs-string">'.'</span> + p + pr +
                <span class="hljs-string">' &lt;'</span> + M + <span class="hljs-string">'.'</span> + (+m + <span class="hljs-number">1</span>) + <span class="hljs-string">'.0'</span>;
      } <span class="hljs-keyword">else</span>
        ret = <span class="hljs-string">'&gt;='</span> + M + <span class="hljs-string">'.'</span> + m + <span class="hljs-string">'.'</span> + p + pr +
              <span class="hljs-string">' &lt;'</span> + (+M + <span class="hljs-number">1</span>) + <span class="hljs-string">'.0.0'</span>;
    } <span class="hljs-keyword">else</span> {
      ;
      <span class="hljs-keyword">if</span> (M === <span class="hljs-string">'0'</span>) {
        <span class="hljs-keyword">if</span> (m === <span class="hljs-string">'0'</span>)
          ret = <span class="hljs-string">'&gt;='</span> + M + <span class="hljs-string">'.'</span> + m + <span class="hljs-string">'.'</span> + p +
                <span class="hljs-string">' &lt;'</span> + M + <span class="hljs-string">'.'</span> + m + <span class="hljs-string">'.'</span> + (+p + <span class="hljs-number">1</span>);
        <span class="hljs-keyword">else</span>
          ret = <span class="hljs-string">'&gt;='</span> + M + <span class="hljs-string">'.'</span> + m + <span class="hljs-string">'.'</span> + p +
                <span class="hljs-string">' &lt;'</span> + M + <span class="hljs-string">'.'</span> + (+m + <span class="hljs-number">1</span>) + <span class="hljs-string">'.0'</span>;
      } <span class="hljs-keyword">else</span>
        ret = <span class="hljs-string">'&gt;='</span> + M + <span class="hljs-string">'.'</span> + m + <span class="hljs-string">'.'</span> + p +
              <span class="hljs-string">' &lt;'</span> + (+M + <span class="hljs-number">1</span>) + <span class="hljs-string">'.0.0'</span>;
    }

    ;
    <span class="hljs-keyword">return</span> ret;
  });
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">replaceXRanges</span>(<span class="hljs-params">comp, loose</span>) </span>{
  ;
  <span class="hljs-keyword">return</span> comp.split(<span class="hljs-regexp">/\s+/</span>).map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">comp</span>) </span>{
    <span class="hljs-keyword">return</span> replaceXRange(comp, loose);
  }).join(<span class="hljs-string">' '</span>);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">replaceXRange</span>(<span class="hljs-params">comp, loose</span>) </span>{
  comp = comp.trim();
  <span class="hljs-keyword">var</span> r = loose ? re[XRANGELOOSE] : re[XRANGE];
  <span class="hljs-keyword">return</span> comp.replace(r, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ret, gtlt, M, m, p, pr</span>) </span>{
    ;
    <span class="hljs-keyword">var</span> xM = isX(M);
    <span class="hljs-keyword">var</span> xm = xM || isX(m);
    <span class="hljs-keyword">var</span> xp = xm || isX(p);
    <span class="hljs-keyword">var</span> anyX = xp;

    <span class="hljs-keyword">if</span> (gtlt === <span class="hljs-string">'='</span> &amp;&amp; anyX)
      gtlt = <span class="hljs-string">''</span>;

    <span class="hljs-keyword">if</span> (xM) {
      <span class="hljs-keyword">if</span> (gtlt === <span class="hljs-string">'&gt;'</span> || gtlt === <span class="hljs-string">'&lt;'</span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-53">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-53">&#182;</a>
              </div>
              <p>nothing is allowed</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        ret = <span class="hljs-string">'&lt;0.0.0'</span>;
      } <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-54">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-54">&#182;</a>
              </div>
              <p>nothing is forbidden</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        ret = <span class="hljs-string">'*'</span>;
      }
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (gtlt &amp;&amp; anyX) {</pre></div></div>
            
        </li>
        
        
        <li id="section-55">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-55">&#182;</a>
              </div>
              <p>replace X with 0</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (xm)
        m = <span class="hljs-number">0</span>;
      <span class="hljs-keyword">if</span> (xp)
        p = <span class="hljs-number">0</span>;

      <span class="hljs-keyword">if</span> (gtlt === <span class="hljs-string">'&gt;'</span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-56">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-56">&#182;</a>
              </div>
              <blockquote>
<p>1 =&gt; &gt;=2.0.0
1.2 =&gt; &gt;=1.3.0
1.2.3 =&gt; &gt;= 1.2.4</p>
</blockquote>

            </div>
            
            <div class="content"><div class='highlight'><pre>        gtlt = <span class="hljs-string">'&gt;='</span>;
        <span class="hljs-keyword">if</span> (xm) {
          M = +M + <span class="hljs-number">1</span>;
          m = <span class="hljs-number">0</span>;
          p = <span class="hljs-number">0</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (xp) {
          m = +m + <span class="hljs-number">1</span>;
          p = <span class="hljs-number">0</span>;
        }
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (gtlt === <span class="hljs-string">'&lt;='</span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-57">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-57">&#182;</a>
              </div>
              <p>&lt;=0.7.x is actually &lt;0.8.0, since any 0.7.x should
pass.  Similarly, &lt;=7.x is actually &lt;8.0.0, etc.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        gtlt = <span class="hljs-string">'&lt;'</span>
        <span class="hljs-keyword">if</span> (xm)
          M = +M + <span class="hljs-number">1</span>
        <span class="hljs-keyword">else</span>
          m = +m + <span class="hljs-number">1</span>
      }

      ret = gtlt + M + <span class="hljs-string">'.'</span> + m + <span class="hljs-string">'.'</span> + p;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (xm) {
      ret = <span class="hljs-string">'&gt;='</span> + M + <span class="hljs-string">'.0.0 &lt;'</span> + (+M + <span class="hljs-number">1</span>) + <span class="hljs-string">'.0.0'</span>;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (xp) {
      ret = <span class="hljs-string">'&gt;='</span> + M + <span class="hljs-string">'.'</span> + m + <span class="hljs-string">'.0 &lt;'</span> + M + <span class="hljs-string">'.'</span> + (+m + <span class="hljs-number">1</span>) + <span class="hljs-string">'.0'</span>;
    }

    ;

    <span class="hljs-keyword">return</span> ret;
  });
}</pre></div></div>
            
        </li>
        
        
        <li id="section-58">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-58">&#182;</a>
              </div>
              <p>Because <em> is AND-ed with everything else in the comparator,
and ‘’ means “any version”, just remove the </em>s entirely.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">replaceStars</span>(<span class="hljs-params">comp, loose</span>) </span>{
  ;</pre></div></div>
            
        </li>
        
        
        <li id="section-59">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-59">&#182;</a>
              </div>
              <p>Looseness is ignored here.  star is always as loose as it gets!</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">return</span> comp.trim().replace(re[STAR], <span class="hljs-string">''</span>);
}</pre></div></div>
            
        </li>
        
        
        <li id="section-60">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-60">&#182;</a>
              </div>
              <p>This function is passed to string.replace(re[HYPHENRANGE])
M, m, patch, prerelease, build
1.2 - 3.4.5 =&gt; &gt;=1.2.0 &lt;=3.4.5
1.2.3 - 3.4 =&gt; &gt;=1.2.0 <3.5.0 Any 3.4.x will do
1.2 - 3.4 => &gt;=1.2.0 &lt;3.5.0</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hyphenReplace</span>(<span class="hljs-params">$0,
                       from, fM, fm, fp, fpr, fb,
                       to, tM, tm, tp, tpr, tb</span>) </span>{

  <span class="hljs-keyword">if</span> (isX(fM))
    from = <span class="hljs-string">''</span>;
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isX(fm))
    from = <span class="hljs-string">'&gt;='</span> + fM + <span class="hljs-string">'.0.0'</span>;
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isX(fp))
    from = <span class="hljs-string">'&gt;='</span> + fM + <span class="hljs-string">'.'</span> + fm + <span class="hljs-string">'.0'</span>;
  <span class="hljs-keyword">else</span>
    from = <span class="hljs-string">'&gt;='</span> + from;

  <span class="hljs-keyword">if</span> (isX(tM))
    to = <span class="hljs-string">''</span>;
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isX(tm))
    to = <span class="hljs-string">'&lt;'</span> + (+tM + <span class="hljs-number">1</span>) + <span class="hljs-string">'.0.0'</span>;
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isX(tp))
    to = <span class="hljs-string">'&lt;'</span> + tM + <span class="hljs-string">'.'</span> + (+tm + <span class="hljs-number">1</span>) + <span class="hljs-string">'.0'</span>;
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (tpr)
    to = <span class="hljs-string">'&lt;='</span> + tM + <span class="hljs-string">'.'</span> + tm + <span class="hljs-string">'.'</span> + tp + <span class="hljs-string">'-'</span> + tpr;
  <span class="hljs-keyword">else</span>
    to = <span class="hljs-string">'&lt;='</span> + to;

  <span class="hljs-keyword">return</span> (from + <span class="hljs-string">' '</span> + to).trim();
}</pre></div></div>
            
        </li>
        
        
        <li id="section-61">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-61">&#182;</a>
              </div>
              <p>if ANY of the sets match ALL of its comparators, then pass</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>Range.prototype.test = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">version</span>) </span>{
  <span class="hljs-keyword">if</span> (!version)
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> version === <span class="hljs-string">'string'</span>)
    version = <span class="hljs-keyword">new</span> SemVer(version, <span class="hljs-keyword">this</span>.loose);

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">this</span>.set.length; i++) {
    <span class="hljs-keyword">if</span> (testSet(<span class="hljs-keyword">this</span>.set[i], version))
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }
  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">testSet</span>(<span class="hljs-params">set, version</span>) </span>{
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; set.length; i++) {
    <span class="hljs-keyword">if</span> (!set[i].test(version))
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }

  <span class="hljs-keyword">if</span> (version.prerelease.length) {</pre></div></div>
            
        </li>
        
        
        <li id="section-62">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-62">&#182;</a>
              </div>
              <p>Find the set of versions that are allowed to have prereleases
For example, ^1.2.3-pr.1 desugars to &gt;=1.2.3-pr.1 &lt;2.0.0
That should allow <code>1.2.3-pr.2</code> to pass.
However, <code>1.2.4-alpha.notready</code> should NOT be allowed,
even though it’s within the range set by the comparators.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; set.length; i++) {
      ;
      <span class="hljs-keyword">if</span> (set[i].semver === ANY)
        <span class="hljs-keyword">continue</span>;

      <span class="hljs-keyword">if</span> (set[i].semver.prerelease.length &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">var</span> allowed = set[i].semver;
        <span class="hljs-keyword">if</span> (allowed.major === version.major &amp;&amp;
            allowed.minor === version.minor &amp;&amp;
            allowed.patch === version.patch)
          <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
      }
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-63">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-63">&#182;</a>
              </div>
              <p>Version has a -pre, but it’s not one of the ones we like.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }

  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}

exports.satisfies = satisfies;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">satisfies</span>(<span class="hljs-params">version, range, loose</span>) </span>{
  <span class="hljs-keyword">try</span> {
    range = <span class="hljs-keyword">new</span> Range(range, loose);
  } <span class="hljs-keyword">catch</span> (er) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
  <span class="hljs-keyword">return</span> range.test(version);
}

exports.maxSatisfying = maxSatisfying;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">maxSatisfying</span>(<span class="hljs-params">versions, range, loose</span>) </span>{
  <span class="hljs-keyword">return</span> versions.filter(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">version</span>) </span>{
    <span class="hljs-keyword">return</span> satisfies(version, range, loose);
  }).sort(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">a, b</span>) </span>{
    <span class="hljs-keyword">return</span> rcompare(a, b, loose);
  })[<span class="hljs-number">0</span>] || <span class="hljs-literal">null</span>;
}

exports.validRange = validRange;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">validRange</span>(<span class="hljs-params">range, loose</span>) </span>{
  <span class="hljs-keyword">try</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-64">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-64">&#182;</a>
              </div>
              <p>Return ‘*’ instead of ‘’ so that truthiness works.
This will throw if it’s invalid anyway</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Range(range, loose).range || <span class="hljs-string">'*'</span>;
  } <span class="hljs-keyword">catch</span> (er) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  }
}</pre></div></div>
            
        </li>
        
        
        <li id="section-65">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-65">&#182;</a>
              </div>
              <p>Determine if version is less than all the versions possible in the range</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>exports.ltr = ltr;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ltr</span>(<span class="hljs-params">version, range, loose</span>) </span>{
  <span class="hljs-keyword">return</span> outside(version, range, <span class="hljs-string">'&lt;'</span>, loose);
}</pre></div></div>
            
        </li>
        
        
        <li id="section-66">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-66">&#182;</a>
              </div>
              <p>Determine if version is greater than all the versions possible in the range.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>exports.gtr = gtr;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">gtr</span>(<span class="hljs-params">version, range, loose</span>) </span>{
  <span class="hljs-keyword">return</span> outside(version, range, <span class="hljs-string">'&gt;'</span>, loose);
}

exports.outside = outside;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">outside</span>(<span class="hljs-params">version, range, hilo, loose</span>) </span>{
  version = <span class="hljs-keyword">new</span> SemVer(version, loose);
  range = <span class="hljs-keyword">new</span> Range(range, loose);

  <span class="hljs-keyword">var</span> gtfn, ltefn, ltfn, comp, ecomp;
  <span class="hljs-keyword">switch</span> (hilo) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">'&gt;'</span>:
      gtfn = gt;
      ltefn = lte;
      ltfn = lt;
      comp = <span class="hljs-string">'&gt;'</span>;
      ecomp = <span class="hljs-string">'&gt;='</span>;
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'&lt;'</span>:
      gtfn = lt;
      ltefn = gte;
      ltfn = gt;
      comp = <span class="hljs-string">'&lt;'</span>;
      ecomp = <span class="hljs-string">'&lt;='</span>;
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">default</span>:
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'Must provide a hilo val of "&lt;" or "&gt;"'</span>);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-67">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-67">&#182;</a>
              </div>
              <p>If it satisifes the range it is not outside</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">if</span> (satisfies(version, range, loose)) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-68">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-68">&#182;</a>
              </div>
              <p>From now on, variable terms are as if we’re in “gtr” mode.
but note that everything is flipped for the “ltr” function.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; range.set.length; ++i) {
    <span class="hljs-keyword">var</span> comparators = range.set[i];

    <span class="hljs-keyword">var</span> high = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">var</span> low = <span class="hljs-literal">null</span>;

    comparators.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">comparator</span>) </span>{
      <span class="hljs-keyword">if</span> (comparator.semver === ANY) {
        comparator = <span class="hljs-keyword">new</span> Comparator(<span class="hljs-string">'&gt;=0.0.0'</span>)
      }
      high = high || comparator;
      low = low || comparator;
      <span class="hljs-keyword">if</span> (gtfn(comparator.semver, high.semver, loose)) {
        high = comparator;
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ltfn(comparator.semver, low.semver, loose)) {
        low = comparator;
      }
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-69">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-69">&#182;</a>
              </div>
              <p>If the edge version comparator has a operator then our version
isn’t outside it</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (high.operator === comp || high.operator === ecomp) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-70">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-70">&#182;</a>
              </div>
              <p>If the lowest version comparator has an operator and our version
is less than it then it isn’t higher than the range</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> ((!low.operator || low.operator === comp) &amp;&amp;
        ltefn(version, low.semver)) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (low.operator === ecomp &amp;&amp; ltfn(version, low.semver)) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
  }
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}</pre></div></div>
            
        </li>
        
        
        <li id="section-71">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-71">&#182;</a>
              </div>
              <p>Use the define() function if we’re in AMD land</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> define === <span class="hljs-string">'function'</span> &amp;&amp; define.amd)
  define(exports);

})(
  <span class="hljs-keyword">typeof</span> exports === <span class="hljs-string">'object'</span> ? exports :
  <span class="hljs-keyword">typeof</span> define === <span class="hljs-string">'function'</span> &amp;&amp; define.amd ? {} :
  semver = {}
);</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
