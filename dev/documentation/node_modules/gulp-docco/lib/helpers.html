<!DOCTYPE html>

<html>
<head>
  <title>helpers.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="../../../docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>helpers.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-comment">/**
 * Helpers
 * =======
 *
 * In order to prevent docco from using fs, a number of its internal functions have to be
 * duplicated here.
 */</span>

(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
<span class="hljs-pi">  'use strict'</span>;

  <span class="hljs-keyword">var</span> _ = <span class="hljs-built_in">require</span>(<span class="hljs-string">'underscore'</span>);
  <span class="hljs-keyword">var</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);
  <span class="hljs-keyword">var</span> doccoModuleRoot = path.dirname(<span class="hljs-built_in">require</span>.resolve(<span class="hljs-string">'docco'</span>));

  <span class="hljs-keyword">var</span> __slice = [].slice;

  <span class="hljs-keyword">var</span> defaults = {</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>Template engine</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    layout: <span class="hljs-string">'parallel'</span>,
    template: <span class="hljs-literal">null</span>,
    css: <span class="hljs-literal">null</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>Parser only</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    extension: <span class="hljs-literal">null</span>,
    languages: {
      <span class="hljs-string">".coffee"</span>:      {<span class="hljs-string">"name"</span>: <span class="hljs-string">"coffeescript"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"#"</span>},
      <span class="hljs-string">".litcoffee"</span>:   {<span class="hljs-string">"name"</span>: <span class="hljs-string">"coffeescript"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"#"</span>, <span class="hljs-string">"literate"</span>: <span class="hljs-literal">true</span>},
      <span class="hljs-string">"Cakefile"</span>:     {<span class="hljs-string">"name"</span>: <span class="hljs-string">"coffeescript"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"#"</span>},
      <span class="hljs-string">".rb"</span>:          {<span class="hljs-string">"name"</span>: <span class="hljs-string">"ruby"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"#"</span>},
      <span class="hljs-string">".py"</span>:          {<span class="hljs-string">"name"</span>: <span class="hljs-string">"python"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"#"</span>},
      <span class="hljs-string">".tex"</span>:         {<span class="hljs-string">"name"</span>: <span class="hljs-string">"tex"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"%"</span>},
      <span class="hljs-string">".latex"</span>:       {<span class="hljs-string">"name"</span>: <span class="hljs-string">"tex"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"%"</span>},
      <span class="hljs-string">".dtx"</span>:         {<span class="hljs-string">"name"</span>: <span class="hljs-string">"tex"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"%"</span>},
      <span class="hljs-string">".sty"</span>:         {<span class="hljs-string">"name"</span>: <span class="hljs-string">"tex"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"%"</span>},
      <span class="hljs-string">".cls"</span>:         {<span class="hljs-string">"name"</span>: <span class="hljs-string">"tex"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"%"</span>},
      <span class="hljs-string">".js"</span>:          {<span class="hljs-string">"name"</span>: <span class="hljs-string">"javascript"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"//"</span>},
      <span class="hljs-string">".java"</span>:        {<span class="hljs-string">"name"</span>: <span class="hljs-string">"java"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"//"</span>},
      <span class="hljs-string">".groovy"</span>:      {<span class="hljs-string">"name"</span>: <span class="hljs-string">"groovy"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"//"</span>},
      <span class="hljs-string">".scss"</span>:        {<span class="hljs-string">"name"</span>: <span class="hljs-string">"scss"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"//"</span>},
      <span class="hljs-string">".cpp"</span>:         {<span class="hljs-string">"name"</span>: <span class="hljs-string">"cpp"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"//"</span>},
      <span class="hljs-string">".php"</span>:         {<span class="hljs-string">"name"</span>: <span class="hljs-string">"php"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"//"</span>},
      <span class="hljs-string">".hs"</span>:          {<span class="hljs-string">"name"</span>: <span class="hljs-string">"haskell"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"--"</span>},
      <span class="hljs-string">".erl"</span>:         {<span class="hljs-string">"name"</span>: <span class="hljs-string">"erlang"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"%"</span>},
      <span class="hljs-string">".hrl"</span>:         {<span class="hljs-string">"name"</span>: <span class="hljs-string">"erlang"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"%"</span>},
      <span class="hljs-string">".md"</span>:          {<span class="hljs-string">"name"</span>: <span class="hljs-string">"markdown"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">""</span>},
      <span class="hljs-string">".markdown"</span>:    {<span class="hljs-string">"name"</span>: <span class="hljs-string">"markdown"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">""</span>},
      <span class="hljs-string">".less"</span>:        {<span class="hljs-string">"name"</span>: <span class="hljs-string">"less"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"//"</span>},
      <span class="hljs-string">".h"</span>:           {<span class="hljs-string">"name"</span>: <span class="hljs-string">"objectivec"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"//"</span>},
      <span class="hljs-string">".m"</span>:           {<span class="hljs-string">"name"</span>: <span class="hljs-string">"objectivec"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"//"</span>},
      <span class="hljs-string">".n"</span>:           {<span class="hljs-string">"name"</span>: <span class="hljs-string">"nemerle"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"//"</span>},
      <span class="hljs-string">".mm"</span>:          {<span class="hljs-string">"name"</span>: <span class="hljs-string">"objectivec"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"//"</span>},
      <span class="hljs-string">".scala"</span>:       {<span class="hljs-string">"name"</span>: <span class="hljs-string">"scala"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"//"</span>},
      <span class="hljs-string">".cs"</span>:          {<span class="hljs-string">"name"</span>: <span class="hljs-string">"cs"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"//"</span>},
      <span class="hljs-string">".as"</span>:          {<span class="hljs-string">"name"</span>: <span class="hljs-string">"actionscript"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"//"</span>},
      <span class="hljs-string">".scpt"</span>:        {<span class="hljs-string">"name"</span>: <span class="hljs-string">"applescript"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"--"</span>},
      <span class="hljs-string">".applescript"</span>: {<span class="hljs-string">"name"</span>: <span class="hljs-string">"applescript"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"--"</span>},
      <span class="hljs-string">".sh"</span>:          {<span class="hljs-string">"name"</span>: <span class="hljs-string">"bash"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"#"</span>},
      <span class="hljs-string">".clj"</span>:         {<span class="hljs-string">"name"</span>: <span class="hljs-string">"clojure"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">";"</span>},
      <span class="hljs-string">".cmake"</span>:       {<span class="hljs-string">"name"</span>: <span class="hljs-string">"cmake"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"#"</span>},
      <span class="hljs-string">".d"</span>:           {<span class="hljs-string">"name"</span>: <span class="hljs-string">"d"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"//"</span>},
      <span class="hljs-string">".p"</span>:           {<span class="hljs-string">"name"</span>: <span class="hljs-string">"delphi"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"//"</span>},
      <span class="hljs-string">".pp"</span>:          {<span class="hljs-string">"name"</span>: <span class="hljs-string">"delphi"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"//"</span>},
      <span class="hljs-string">".pas"</span>:         {<span class="hljs-string">"name"</span>: <span class="hljs-string">"delphi"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"//"</span>},
      <span class="hljs-string">".bat"</span>:         {<span class="hljs-string">"name"</span>: <span class="hljs-string">"dos"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"@?rem"</span>},
      <span class="hljs-string">".btm"</span>:         {<span class="hljs-string">"name"</span>: <span class="hljs-string">"dos"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"@?rem"</span>},
      <span class="hljs-string">".cmd"</span>:         {<span class="hljs-string">"name"</span>: <span class="hljs-string">"dos"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"@?rem"</span>},
      <span class="hljs-string">".go"</span>:          {<span class="hljs-string">"name"</span>: <span class="hljs-string">"go"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"//"</span>},
      <span class="hljs-string">".ini"</span>:         {<span class="hljs-string">"name"</span>: <span class="hljs-string">"ini"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">";"</span>},
      <span class="hljs-string">".lisp"</span>:        {<span class="hljs-string">"name"</span>: <span class="hljs-string">"lisp"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">";"</span>},
      <span class="hljs-string">".lua"</span>:         {<span class="hljs-string">"name"</span>: <span class="hljs-string">"lua"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"--"</span>},
      <span class="hljs-string">".mel"</span>:         {<span class="hljs-string">"name"</span>: <span class="hljs-string">"mel"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"//"</span>},
      <span class="hljs-string">".pl"</span>:          {<span class="hljs-string">"name"</span>: <span class="hljs-string">"perl"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"#"</span>},
      <span class="hljs-string">".pm"</span>:          {<span class="hljs-string">"name"</span>: <span class="hljs-string">"perl"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"#"</span>},
      <span class="hljs-string">".pod"</span>:         {<span class="hljs-string">"name"</span>: <span class="hljs-string">"perl"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"#"</span>},
      <span class="hljs-string">".t"</span>:           {<span class="hljs-string">"name"</span>: <span class="hljs-string">"perl"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"#"</span>},
      <span class="hljs-string">".r"</span>:           {<span class="hljs-string">"name"</span>: <span class="hljs-string">"r"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"#"</span>},
      <span class="hljs-string">".rc"</span>:          {<span class="hljs-string">"name"</span>: <span class="hljs-string">"rust"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"//"</span>},
      <span class="hljs-string">".rs"</span>:          {<span class="hljs-string">"name"</span>: <span class="hljs-string">"rust"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"//"</span>},
      <span class="hljs-string">".sql"</span>:         {<span class="hljs-string">"name"</span>: <span class="hljs-string">"sql"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"--"</span>},
      <span class="hljs-string">".vala"</span>:        {<span class="hljs-string">"name"</span>: <span class="hljs-string">"vala"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"//"</span>},
      <span class="hljs-string">".vapi"</span>:        {<span class="hljs-string">"name"</span>: <span class="hljs-string">"vala"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"//"</span>},
      <span class="hljs-string">".vbe"</span>:         {<span class="hljs-string">"name"</span>: <span class="hljs-string">"vbscript"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"'"</span>},
      <span class="hljs-string">".vbs"</span>:         {<span class="hljs-string">"name"</span>: <span class="hljs-string">"vbscript"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"'"</span>},
      <span class="hljs-string">".wsc"</span>:         {<span class="hljs-string">"name"</span>: <span class="hljs-string">"vbscript"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"'"</span>},
      <span class="hljs-string">".wsf"</span>:         {<span class="hljs-string">"name"</span>: <span class="hljs-string">"vbscript"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"'"</span>},
      <span class="hljs-string">".vhdl"</span>:        {<span class="hljs-string">"name"</span>: <span class="hljs-string">"vhdl"</span>, <span class="hljs-string">"symbol"</span>: <span class="hljs-string">"--"</span>}
    }
  };

  <span class="hljs-keyword">var</span> buildMatchers = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">languages</span>) </span>{
    <span class="hljs-keyword">var</span> ext, l;
    <span class="hljs-keyword">for</span> (ext <span class="hljs-keyword">in</span> languages) {
      l = languages[ext];
      l.commentMatcher = <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">"^\\s*"</span> + l.symbol + <span class="hljs-string">"\\s?"</span>);
      l.commentFilter = <span class="hljs-regexp">/(^#![/]|^\s*#\{)/</span>;
    }
    <span class="hljs-keyword">return</span> languages;
  };

  <span class="hljs-keyword">var</span> configure = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">options</span>)</span>{
    <span class="hljs-keyword">var</span> config, dir;
    config = _.extend({}, defaults, _.pick.apply(_, [options].concat(__slice.call(_.keys(defaults)))));

    config.languages = buildMatchers(config.languages);

    <span class="hljs-keyword">if</span> (options.template) {
      config.layout = <span class="hljs-literal">null</span>;
    } <span class="hljs-keyword">else</span> {
      dir = config.layout = path.join(doccoModuleRoot, <span class="hljs-string">'resources'</span>, config.layout);
      config[<span class="hljs-string">"public"</span>] = path.join(dir, <span class="hljs-string">'public'</span>);
      config.template = path.join(dir, <span class="hljs-string">'docco.jst'</span>);
      config.css = options.css || path.join(dir, <span class="hljs-string">'docco.css'</span>);
    }
    <span class="hljs-keyword">return</span> config;
  };

  <span class="hljs-keyword">var</span> getLanguage = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">source, config</span>) </span>{
    <span class="hljs-keyword">var</span> codeExt, codeLang, ext, lang;
    ext = config.extension || path.extname(source) || path.basename(source);
    lang = config.languages[ext] || defaults.languages[ext];
    <span class="hljs-keyword">if</span> (lang &amp;&amp; lang.name === <span class="hljs-string">'markdown'</span>) {
      codeExt = path.extname(path.basename(source, ext));
      <span class="hljs-keyword">if</span> (codeExt &amp;&amp; (codeLang = defaults.languages[codeExt])) {
        lang = _.extend({}, codeLang, {
          literate: <span class="hljs-literal">true</span>
        });
      }
    }
    <span class="hljs-keyword">return</span> lang;
  };

  <span class="hljs-built_in">module</span>.exports = {
    isSupported: getLanguage,
    configure: configure
  };
}());</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
